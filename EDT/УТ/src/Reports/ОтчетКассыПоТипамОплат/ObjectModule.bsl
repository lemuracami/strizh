
Процедура ПриКомпоновкеРезультата(ДокументРезультат, ДанныеРасшифровки, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	
	НастройкиКомпоновщика = КомпоновщикНастроек.ПолучитьНастройки();
	
	ЭлементыПараметров = НастройкиКомпоновщика.ПараметрыДанных.Элементы;
	
	СтандартныйПериод = ЭлементыПараметров.Найти("Период").Значение;

	Если ЗначениеЗаполнено(СтандартныйПериод) И ЗначениеЗаполнено(СтандартныйПериод.ДатаНачала) И ЗначениеЗаполнено(СтандартныйПериод.ДатаОкончания)Тогда
		
	Иначе
		ВызватьИсключение "Не заполнены обязательные параметры отчета";
	КонецЕсли;
	
	ТекПараметр = ЭлементыПараметров.Найти("ФиксацияСверху");
	Если ТекПараметр = Неопределено Тогда
		ФиксацияСверху = 0;
	Иначе
		ФиксацияСверху = ТекПараметр.Значение;
	КонецЕсли;
	
	//ТекПараметр = ЭлементыПараметров.Найти("ФиксацияСверху");
	//ФиксацияСверху = ТекПараметр.Значение;
	
	ТекПараметр = ЭлементыПараметров.Найти("НачалоПериода");
	ТекПараметр.Значение = СтандартныйПериод.ДатаНачала;
	ТекПараметр.Использование = Истина;
	
	ТекПараметр = ЭлементыПараметров.Найти("ОкончаниеПериода");
	ТекПараметр.Значение = СтандартныйПериод.ДатаОкончания;
	ТекПараметр.Использование = Истина;
	
	//ВнешниеНаборыДанных = ПолучитьВнешниеНаборыДанных(СтандартныйПериод.ДатаНачала, СтандартныйПериод.ДатаОкончания, Контрагент);
	
	КомпоновщикМакета = Новый КомпоновщикМакетаКомпоновкиДанных;
	МакетКомпоновки = КомпоновщикМакета.Выполнить(СхемаКомпоновкиДанных, НастройкиКомпоновщика, ДанныеРасшифровки);

	ПроцессорКомпоновки = Новый ПроцессорКомпоновкиДанных;
	//ПроцессорКомпоновки.Инициализировать(МакетКомпоновки, ВнешниеНаборыДанных, ДанныеРасшифровки, Истина);
	ПроцессорКомпоновки.Инициализировать(МакетКомпоновки,, ДанныеРасшифровки, Истина);

	ПроцессорВывода = Новый ПроцессорВыводаРезультатаКомпоновкиДанныхВТабличныйДокумент;
	ПроцессорВывода.УстановитьДокумент(ДокументРезультат);
	
	ПроцессорВывода.Вывести(ПроцессорКомпоновки);
	
	Если ФиксацияСверху Тогда
		ДокументРезультат.ФиксацияСверху = ФиксацияСверху;
	КонецЕсли;
	
КонецПроцедуры
