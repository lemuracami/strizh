
Процедура ПередЗаписью(Отказ, РежимЗаписи, РежимПроведения)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	//Асеев 09.02.2024 (Задача № 5227)>>>
	Если РежимЗаписи = РежимЗаписиДокумента.Проведение Или РежимЗаписи = РежимЗаписиДокумента.ОтменаПроведения Тогда
		зпРаботаСРасчетомЗарплатыСервер.ПередЗаписьюДокументаЗП(Отказ, РежимЗаписи, ЭтотОбъект);
		Если Отказ Тогда
			Возврат;
		КонецЕсли;
	КонецЕсли;
	//Асеев 09.02.2024 (Задача № 5227)<<<
	
	Если Не ЭтоНовый() Тогда
		Если baoВызовСервера.РейсЗакрыт(Ссылка) Тогда
			Отказ = Истина;
			Сообщить("Документ закрыт для редактирования");
			Возврат;
		КонецЕсли;
	КонецЕсли;
	
	СуммаНачислений = 0;
	СуммаУдержаний = 0;
	
	ТипНачисление = Тип("СправочникСсылка.зпНачисления");
	ТипУдержание = Тип("СправочникСсылка.зпУдержания");
	Для Каждого СтрокаНачисления Из НачисленияУдержания Цикл
		ТипЗначения = ТипЗнч(СтрокаНачисления.НачислениеУдержание);
		Если ТипЗначения = ТипНачисление Тогда
			СуммаНачислений = СуммаНачислений + СтрокаНачисления.Сумма;
		ИначеЕсли ТипЗначения = ТипУдержание Тогда
			СуммаУдержаний = СуммаУдержаний + СтрокаНачисления.Сумма;
		КонецЕсли;
	КонецЦикла;
	
	ИтогоСуммаНачислений = СуммаНачислений;
	ИтогоСуммаУдержаний = СуммаУдержаний;
	
КонецПроцедуры
