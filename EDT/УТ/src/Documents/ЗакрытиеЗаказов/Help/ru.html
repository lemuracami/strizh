<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link><meta name="GENERATOR" content="MSHTML 11.00.9600.18739"></meta></head><body>
<p>1. ТЧ "Товары"</p>
<p>Количество - сколько должны доставить.</p>
<p>КоличествоВозвращено - возвращено клиентом(отказ)</p>
<p>Недовложение.</p>
<p> </p>
<p>2.  ТЧ "Заказы".</p>
<p>РезультатДоставки - выполнено, если не было возврата и недовложений.</p>
<p>Закрыть - проверка</p><details><summary><p><font style="BACKGROUND-COLOR: #ffff00">   Если Стр.Закрыть Тогда<br>    <br>    Если Стр.РезультатДоставки = Справочники.новаРезультатМестнойДоставки.Выполнена<br>     ИЛИ Стр.РезультатДоставки = Справочники.новаРезультатМестнойДоставки.ВыполненаЧастично<br>     ИЛИ (Стр.РезультатДоставки = Справочники.новаРезультатМестнойДоставки.НеВыполнена И Стр.ПричинаНевыполнения = Справочники.ПричиныНеВыполненияДоставки.ОтказКлиентаСЗаездом) Тогда<br>    Иначе<br>     //ищем допуслугу<br>     Струк = Новый Структура;<br>     Струк.Вставить("Реализация", Стр.Реализация.Ссылка);<br>     Струк.Вставить("Услуга", Справочники.ПоказателиРасчетаУслугСД.ДоставкаСТерминалаВыдачиНаТерминалПриема.Ссылка);<br>     <br>     Най = Услуги.НайтиСтроки(Струк);<br>     Если Най.Количество() = 0 Тогда<br>      Сообщить("Для строки " + Стр.НомерСтроки + " нельзя установить статус ""Закрыт"" для текущего результата доставки ( " + Стр.РезультатДоставки + ", " + Стр.ПричинаНевыполнения + " )");<br>      Отказ = Истина; <br>      Возврат;<br>     КонецЕсли; </font></p>
<p><br><font style="BACKGROUND-COLOR: #ffff00">    КонецЕсли;<br></font></p>
<p> </p></summary></details></body></html>