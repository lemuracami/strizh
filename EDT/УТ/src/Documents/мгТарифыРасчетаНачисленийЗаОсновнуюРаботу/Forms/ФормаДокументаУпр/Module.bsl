
&НаКлиенте
Процедура СписокЗаказовТипЗаказаПриИзменении(Элемент)
	
	//ТекущиеДанные = Элементы.СписокДоставкаЗабор.ТекущиеДанные;
	//Если ТекущиеДанные <> Неопределено Тогда
	//	Если ТекущиеДанные.ТипЗаказа = ПредопределенноеЗначение("Перечисление.ТипыЗаказов.Доставка") Тогда
	//		МассивТипов = Новый Массив;
	//		МассивТипов.Добавить(Тип("СправочникСсылка.мгКатегорииЗаказовДляРасчетаФОТ"));
	//		Элементы.СписокДоставкаЗаборКатегорияЗаказа.ОграничениеТипа = Новый ОписаниеТипов(МассивТипов);
	//	ИначеЕсли ТекущиеДанные.ТипЗаказа = ПредопределенноеЗначение("Перечисление.ТипыЗаказов.Забор") Тогда
	//		МассивТипов = Новый Массив;
	//		МассивТипов.Добавить(Тип("СправочникСсылка.мгКатегорииЗабора"));
	//		Элементы.СписокДоставкаЗаборКатегорияЗаказа.ОграничениеТипа = Новый ОписаниеТипов(МассивТипов);
	//	КонецЕсли;
	//КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура СписокДоставкаЗаборКатегорияЗаказаНачалоВыбора(Элемент, ДанныеВыбора, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	ТекущиеДанные = Элементы.СписокДоставкаЗабор.ТекущиеДанные;
	Если ТекущиеДанные <> Неопределено Тогда
		Если ТекущиеДанные.ТипЗаказа = ПредопределенноеЗначение("Перечисление.ТипыЗаказов.Доставка") Тогда
			ДанныеВыбора = ПолучитьДанныеВыбораКатегорияЗаказа(ТекущиеДанные.ТипЗаказа);
		ИначеЕсли ТекущиеДанные.ТипЗаказа = ПредопределенноеЗначение("Перечисление.ТипыЗаказов.Забор") Тогда
			ДанныеВыбора = ПолучитьДанныеВыбораКатегорияЗаказа(ТекущиеДанные.ТипЗаказа);
		КонецЕсли;
	КонецЕсли;
	
КонецПроцедуры

&НаСервереБезКонтекста
Функция ПолучитьДанныеВыбораКатегорияЗаказа(ТипЗаказа)
	
	ДанныеВыбора = Новый СписокЗначений;
	Если ТипЗаказа = ПредопределенноеЗначение("Перечисление.ТипыЗаказов.Доставка") Тогда
		СпрКатегории = Справочники.мгКатегорииЗаказов.Выбрать();
	ИначеЕсли ТипЗаказа = ПредопределенноеЗначение("Перечисление.ТипыЗаказов.Забор") Тогда
		СпрКатегории = Справочники.мгКатегорииЗабора.Выбрать();
	КонецЕсли;
	Пока СпрКатегории.Следующий() Цикл
		ДанныеВыбора.Добавить(СпрКатегории.Ссылка);
	КонецЦикла;
	
	Возврат ДанныеВыбора;
	
КонецФункции

&НаКлиенте
Процедура СписокДоставкаЗаборКатегорияЗаказаПриИзменении(Элемент)
	// Вставить содержимое обработчика.
КонецПроцедуры

&НаКлиенте
Процедура СписокДоставкаЗаборКатегорияЗаказаОбработкаВыбора(Элемент, ВыбранноеЗначение, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	ТекущиеДанные = Элементы.СписокДоставкаЗабор.ТекущиеДанные;
	ТекущиеДанные.КатегорияЗаказа = ВыбранноеЗначение;
	
КонецПроцедуры

&НаКлиенте
Процедура ПередЗаписью(Отказ, ПараметрыЗаписи)

	Объект.Ответственный = УправлениеПользователями.ПолучитьЗначениеПоУмолчанию(глЗначениеПеременной("глТекущийПользователь"), "ОсновнойОтветственный");
	
КонецПроцедуры
